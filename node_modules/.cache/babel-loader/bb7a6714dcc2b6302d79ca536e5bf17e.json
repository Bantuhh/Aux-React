{"ast":null,"code":"var _jsxFileName = \"/Users/dbanta/Desktop/Aux React/aux-pwa/src/components/search/searchWeb.jsx\";\nimport React, { Component } from \"react\";\nimport { SessionContext } from \"../../session-context\";\nimport { addSongToQueue } from \"../../utils/queueInterface\";\nimport { viewOnSpotify, playURI } from \"../../utils/spotifyInterface\";\nimport YTSearch from \"youtube-api-search\";\nimport \"../../styles/SearchWeb.css\";\nimport { NotificationContainer, NotificationManager } from \"react-notifications\";\nimport \"react-notifications/lib/notifications.css\";\nimport SearchResults from \"./searchResults\";\nimport SearchIcon from \"../../resources/images/SearchIcon.png\";\nimport Spotify from \"spotify-web-api-js\";\nconst spotifyWebApi = new Spotify();\nconst YOUTUBE_API_KEY = \"AIzaSyB3FeQ_UyFnXjkDV9V62tca3eLs4D0NQjQ\";\n\nclass SearchWeb extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      trackSearchResults: global.spotifyTrackSearchResults,\n      youtubeSearchResults: global.youtubeSearchResults,\n      spotifySearch: Object.keys(global.spotifyTrackSearchResults).length == 0 ? false : true,\n      lastSpotifySearchQuery: global.lastSpotifySearchQuery,\n      songOptionsSelected: false,\n      selectedSongInfo: \"HI\",\n      selectedPlatform: \"Spotify\"\n    };\n\n    this.createNotification = type => {\n      console.log(\"GOT TO CREATE NOTIFICATION\");\n\n      switch (type) {\n        case \"info\":\n          NotificationManager.info(\"Info message\");\n          break;\n\n        case \"success\":\n          NotificationManager.success(\"Success message\", \"Title here\");\n          break;\n\n        case \"warning\":\n          NotificationManager.warning(\"Warning message\", \"Close after 3000ms\", 3000);\n          break;\n\n        case \"error\":\n          NotificationManager.error(\"Make sure you are logged into your Spotify\", \"Error!\", 5000, () => {//alert(\"callback\");\n          });\n          break;\n      }\n\n      return () => {};\n    };\n\n    this.spotifySearchTrack = () => {\n      this.setState({\n        selectedPlatform: \"Spotify\"\n      });\n      var query = document.getElementById(\"searchQuery\").value;\n      spotifyWebApi.searchTracks(query).then(response => {\n        console.log(response);\n        this.setState({\n          trackSearchResults: response.tracks.items,\n          spotifySearch: true\n        });\n        global.spotifyTrackSearchResults = response.tracks.items;\n        global.lastSpotifySearchQuery = query;\n      }, reason => {\n        console.log(\"GOT TO ERROR\");\n        this.createNotification(\"error\");\n        console.error(reason); // Error!\n      });\n    };\n\n    this.showSongOptions = songInfo => {\n      console.log(songInfo);\n      this.setState({\n        songOptionsSelected: true,\n        selectedSongInfo: songInfo\n      });\n    };\n\n    this.playSongNow = songInfo => {\n      const songURI = songInfo[\"uri\"];\n      playURI(songURI, global.spotifyAccessToken);\n      global.isContentPlaying = true; // Set song as currently playing\n\n      global.currentlyPlaying = [\"Spotify\", songInfo];\n      this.context.updateSessionQueue(global.sessionQueue);\n    };\n\n    this.formatArtistString = artistObj => {\n      var artistString = \"\";\n      var numArtists = 0;\n\n      for (var key in Object.keys(artistObj)) {\n        var artist = artistObj[key];\n\n        if (numArtists > 0) {\n          artistString = artistString + \", \" + artist.name;\n        } else {\n          artistString = artist.name;\n        }\n\n        numArtists += 1;\n      }\n\n      return artistString;\n    };\n\n    this.youtubeSearch = () => {\n      var query = document.getElementById(\"searchQuery\").value;\n      YTSearch({\n        key: YOUTUBE_API_KEY,\n        term: query\n      }, videos => {\n        //do something with videos!\n        console.log(videos);\n        this.setState({\n          selectedPlatform: \"Youtube\",\n          youtubeSearchResults: videos\n        });\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"searchFlex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"searchMiddle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"searchQueryDiv\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"searchInputDiv\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"searchIcon\",\n      src: SearchIcon,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"searchQuery\",\n      placeholder: this.state.lastSpotifySearchQuery === \"\" ? \"Search a song or artist..\" : this.state.lastSpotifySearchQuery,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"searchButtonDiv\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      id: \"spotifySearchBtn\",\n      onClick: this.spotifySearchTrack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      id: \"youtubeSearchBtn\",\n      onClick: this.youtubeSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      id: \"searchDivHeader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 13\n      }\n    }, this.state.spotifySearch ? \"Spotify Search\" : \"Enter a query and click desired platform to search..\")), /*#__PURE__*/React.createElement(SearchResults, {\n      trackSearchResults: this.state.trackSearchResults,\n      youtubeSearchResults: this.state.youtubeSearchResults,\n      playSongNow: this.playSongNow,\n      showSongOptions: this.showSongOptions,\n      selectedPlatform: this.state.selectedPlatform,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(NotificationContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }\n    })), this.state.songOptionsSelected ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"searchRight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"songOptionsAlbumImg\",\n      src: this.state.selectedSongInfo.album.images[0].url,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"songOptionsTitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 13\n      }\n    }, this.state.selectedSongInfo.name), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"songOptionsArtist\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 13\n      }\n    }, this.formatArtistString(this.state.selectedSongInfo.artists)), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"firstSeparatorLine\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      id: \"addToQueueBtn\",\n      onClick: () => addSongToQueue(this.state.selectedPlatform, this.state.selectedSongInfo),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"secondSeparatorLine\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      id: \"viewOnSpotifyBtn\",\n      onClick: () => viewOnSpotify(this.state.selectedSongInfo),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 13\n      }\n    })) :\n    /*#__PURE__*/\n    // If nothing selected, show nothing on right side\n    React.createElement(\"div\", {\n      className: \"searchRight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }\n    }));\n  }\n\n}\n\nSearchWeb.contextType = SessionContext;\nexport default SearchWeb;","map":{"version":3,"sources":["/Users/dbanta/Desktop/Aux React/aux-pwa/src/components/search/searchWeb.jsx"],"names":["React","Component","SessionContext","addSongToQueue","viewOnSpotify","playURI","YTSearch","NotificationContainer","NotificationManager","SearchResults","SearchIcon","Spotify","spotifyWebApi","YOUTUBE_API_KEY","SearchWeb","state","trackSearchResults","global","spotifyTrackSearchResults","youtubeSearchResults","spotifySearch","Object","keys","length","lastSpotifySearchQuery","songOptionsSelected","selectedSongInfo","selectedPlatform","createNotification","type","console","log","info","success","warning","error","spotifySearchTrack","setState","query","document","getElementById","value","searchTracks","then","response","tracks","items","reason","showSongOptions","songInfo","playSongNow","songURI","spotifyAccessToken","isContentPlaying","currentlyPlaying","context","updateSessionQueue","sessionQueue","formatArtistString","artistObj","artistString","numArtists","key","artist","name","youtubeSearch","term","videos","render","album","images","url","artists","contextType"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,cAAT,QAA+B,uBAA/B;AAEA,SAASC,cAAT,QAA+B,4BAA/B;AAEA,SAASC,aAAT,EAAwBC,OAAxB,QAAuC,8BAAvC;AAEA,OAAOC,QAAP,MAAqB,oBAArB;AAEA,OAAO,4BAAP;AACA,SACEC,qBADF,EAEEC,mBAFF,QAGO,qBAHP;AAIA,OAAO,2CAAP;AAEA,OAAOC,aAAP,MAA0B,iBAA1B;AAEA,OAAOC,UAAP,MAAuB,uCAAvB;AAEA,OAAOC,OAAP,MAAoB,oBAApB;AACA,MAAMC,aAAa,GAAG,IAAID,OAAJ,EAAtB;AAEA,MAAME,eAAe,GAAG,yCAAxB;;AAEA,MAAMC,SAAN,SAAwBb,SAAxB,CAAkC;AAAA;AAAA;AAAA,SAChCc,KADgC,GACxB;AACNC,MAAAA,kBAAkB,EAAEC,MAAM,CAACC,yBADrB;AAENC,MAAAA,oBAAoB,EAAEF,MAAM,CAACE,oBAFvB;AAGNC,MAAAA,aAAa,EACXC,MAAM,CAACC,IAAP,CAAYL,MAAM,CAACC,yBAAnB,EAA8CK,MAA9C,IAAwD,CAAxD,GAA4D,KAA5D,GAAoE,IAJhE;AAKNC,MAAAA,sBAAsB,EAAEP,MAAM,CAACO,sBALzB;AAMNC,MAAAA,mBAAmB,EAAE,KANf;AAONC,MAAAA,gBAAgB,EAAE,IAPZ;AAQNC,MAAAA,gBAAgB,EAAE;AARZ,KADwB;;AAAA,SAYhCC,kBAZgC,GAYVC,IAAD,IAAU;AAC7BC,MAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;;AACA,cAAQF,IAAR;AACE,aAAK,MAAL;AACErB,UAAAA,mBAAmB,CAACwB,IAApB,CAAyB,cAAzB;AACA;;AACF,aAAK,SAAL;AACExB,UAAAA,mBAAmB,CAACyB,OAApB,CAA4B,iBAA5B,EAA+C,YAA/C;AACA;;AACF,aAAK,SAAL;AACEzB,UAAAA,mBAAmB,CAAC0B,OAApB,CACE,iBADF,EAEE,oBAFF,EAGE,IAHF;AAKA;;AACF,aAAK,OAAL;AACE1B,UAAAA,mBAAmB,CAAC2B,KAApB,CACE,4CADF,EAEE,QAFF,EAGE,IAHF,EAIE,MAAM,CACJ;AACD,WANH;AAQA;AAvBJ;;AAyBA,aAAO,MAAM,CAAE,CAAf;AACD,KAxC+B;;AAAA,SA0ChCC,kBA1CgC,GA0CX,MAAM;AACzB,WAAKC,QAAL,CAAc;AACZV,QAAAA,gBAAgB,EAAE;AADN,OAAd;AAIA,UAAIW,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAnD;AACA7B,MAAAA,aAAa,CAAC8B,YAAd,CAA2BJ,KAA3B,EAAkCK,IAAlC,CACGC,QAAD,IAAc;AACZd,QAAAA,OAAO,CAACC,GAAR,CAAYa,QAAZ;AACA,aAAKP,QAAL,CAAc;AACZrB,UAAAA,kBAAkB,EAAE4B,QAAQ,CAACC,MAAT,CAAgBC,KADxB;AAEZ1B,UAAAA,aAAa,EAAE;AAFH,SAAd;AAKAH,QAAAA,MAAM,CAACC,yBAAP,GAAmC0B,QAAQ,CAACC,MAAT,CAAgBC,KAAnD;AACA7B,QAAAA,MAAM,CAACO,sBAAP,GAAgCc,KAAhC;AACD,OAVH,EAWGS,MAAD,IAAY;AACVjB,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA,aAAKH,kBAAL,CAAwB,OAAxB;AACAE,QAAAA,OAAO,CAACK,KAAR,CAAcY,MAAd,EAHU,CAGa;AACxB,OAfH;AAiBD,KAjE+B;;AAAA,SAmEhCC,eAnEgC,GAmEbC,QAAD,IAAc;AAC9BnB,MAAAA,OAAO,CAACC,GAAR,CAAYkB,QAAZ;AAEA,WAAKZ,QAAL,CAAc;AACZZ,QAAAA,mBAAmB,EAAE,IADT;AAEZC,QAAAA,gBAAgB,EAAEuB;AAFN,OAAd;AAID,KA1E+B;;AAAA,SA4EhCC,WA5EgC,GA4EjBD,QAAD,IAAc;AAC1B,YAAME,OAAO,GAAGF,QAAQ,CAAC,KAAD,CAAxB;AAEA5C,MAAAA,OAAO,CAAC8C,OAAD,EAAUlC,MAAM,CAACmC,kBAAjB,CAAP;AAEAnC,MAAAA,MAAM,CAACoC,gBAAP,GAA0B,IAA1B,CAL0B,CAO1B;;AACApC,MAAAA,MAAM,CAACqC,gBAAP,GAA0B,CAAC,SAAD,EAAYL,QAAZ,CAA1B;AAEA,WAAKM,OAAL,CAAaC,kBAAb,CAAgCvC,MAAM,CAACwC,YAAvC;AACD,KAvF+B;;AAAA,SAyFhCC,kBAzFgC,GAyFVC,SAAD,IAAe;AAClC,UAAIC,YAAY,GAAG,EAAnB;AACA,UAAIC,UAAU,GAAG,CAAjB;;AAEA,WAAK,IAAIC,GAAT,IAAgBzC,MAAM,CAACC,IAAP,CAAYqC,SAAZ,CAAhB,EAAwC;AACtC,YAAII,MAAM,GAAGJ,SAAS,CAACG,GAAD,CAAtB;;AAEA,YAAID,UAAU,GAAG,CAAjB,EAAoB;AAClBD,UAAAA,YAAY,GAAGA,YAAY,GAAG,IAAf,GAAsBG,MAAM,CAACC,IAA5C;AACD,SAFD,MAEO;AACLJ,UAAAA,YAAY,GAAGG,MAAM,CAACC,IAAtB;AACD;;AACDH,QAAAA,UAAU,IAAI,CAAd;AACD;;AAED,aAAOD,YAAP;AACD,KAzG+B;;AAAA,SA4GhCK,aA5GgC,GA4GhB,MAAM;AACpB,UAAI3B,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAnD;AACAnC,MAAAA,QAAQ,CAAC;AAAEwD,QAAAA,GAAG,EAAEjD,eAAP;AAAwBqD,QAAAA,IAAI,EAAE5B;AAA9B,OAAD,EAAyC6B,MAAD,IAAY;AAC1D;AACArC,QAAAA,OAAO,CAACC,GAAR,CAAYoC,MAAZ;AAEA,aAAK9B,QAAL,CAAc;AACZV,UAAAA,gBAAgB,EAAE,SADN;AAEZR,UAAAA,oBAAoB,EAAEgD;AAFV,SAAd;AAID,OARO,CAAR;AASD,KAvH+B;AAAA;;AAyHhCC,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAA4B,MAAA,GAAG,EAAE1D,UAAjC;AAA6C,MAAA,GAAG,EAAC,EAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,EAAE,EAAC,aAFL;AAGE,MAAA,WAAW,EACT,KAAKK,KAAL,CAAWS,sBAAX,KAAsC,EAAtC,GACI,2BADJ,GAEI,KAAKT,KAAL,CAAWS,sBANnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF,eAYE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,EAAE,EAAC,kBADL;AAEE,MAAA,OAAO,EAAE,KAAKY,kBAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAIE;AACE,MAAA,EAAE,EAAC,kBADL;AAEE,MAAA,OAAO,EAAE,KAAK6B,aAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CAZF,eAoBE;AAAG,MAAA,EAAE,EAAC,iBAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKlD,KAAL,CAAWK,aAAX,GACG,gBADH,GAEG,sDAHN,CApBF,CADF,eA2BE,oBAAC,aAAD;AACE,MAAA,kBAAkB,EAAE,KAAKL,KAAL,CAAWC,kBADjC;AAEE,MAAA,oBAAoB,EAAE,KAAKD,KAAL,CAAWI,oBAFnC;AAGE,MAAA,WAAW,EAAE,KAAK+B,WAHpB;AAIE,MAAA,eAAe,EAAE,KAAKF,eAJxB;AAKE,MAAA,gBAAgB,EAAE,KAAKjC,KAAL,CAAWY,gBAL/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA3BF,eAiCE,oBAAC,qBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAjCF,CADF,EAqCG,KAAKZ,KAAL,CAAWU,mBAAX,gBACC;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,SAAS,EAAC,qBADZ;AAEE,MAAA,GAAG,EAAE,KAAKV,KAAL,CAAWW,gBAAX,CAA4B2C,KAA5B,CAAkCC,MAAlC,CAAyC,CAAzC,EAA4CC,GAFnD;AAGE,MAAA,GAAG,EAAC,EAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAME;AAAG,MAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKxD,KAAL,CAAWW,gBAAX,CAA4BsC,IAD/B,CANF,eASE;AAAG,MAAA,SAAS,EAAC,mBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKN,kBAAL,CAAwB,KAAK3C,KAAL,CAAWW,gBAAX,CAA4B8C,OAApD,CADH,CATF,eAYE;AAAK,MAAA,EAAE,EAAC,oBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAZF,eAaE;AACE,MAAA,EAAE,EAAC,eADL;AAEE,MAAA,OAAO,EAAE,MACPrE,cAAc,CACZ,KAAKY,KAAL,CAAWY,gBADC,EAEZ,KAAKZ,KAAL,CAAWW,gBAFC,CAHlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbF,eAqBE;AAAK,MAAA,EAAE,EAAC,qBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MArBF,eAsBE;AACE,MAAA,EAAE,EAAC,kBADL;AAEE,MAAA,OAAO,EAAE,MACPtB,aAAa,CAAC,KAAKW,KAAL,CAAWW,gBAAZ,CAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtBF,CADD;AAAA;AA8BC;AACA;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApEJ,CADF;AAyED;;AAnM+B;;AAqMlCZ,SAAS,CAAC2D,WAAV,GAAwBvE,cAAxB;AAEA,eAAeY,SAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { SessionContext } from \"../../session-context\";\n\nimport { addSongToQueue } from \"../../utils/queueInterface\";\n\nimport { viewOnSpotify, playURI } from \"../../utils/spotifyInterface\";\n\nimport YTSearch from \"youtube-api-search\";\n\nimport \"../../styles/SearchWeb.css\";\nimport {\n  NotificationContainer,\n  NotificationManager,\n} from \"react-notifications\";\nimport \"react-notifications/lib/notifications.css\";\n\nimport SearchResults from \"./searchResults\";\n\nimport SearchIcon from \"../../resources/images/SearchIcon.png\";\n\nimport Spotify from \"spotify-web-api-js\";\nconst spotifyWebApi = new Spotify();\n\nconst YOUTUBE_API_KEY = \"AIzaSyB3FeQ_UyFnXjkDV9V62tca3eLs4D0NQjQ\";\n\nclass SearchWeb extends Component {\n  state = {\n    trackSearchResults: global.spotifyTrackSearchResults,\n    youtubeSearchResults: global.youtubeSearchResults,\n    spotifySearch:\n      Object.keys(global.spotifyTrackSearchResults).length == 0 ? false : true,\n    lastSpotifySearchQuery: global.lastSpotifySearchQuery,\n    songOptionsSelected: false,\n    selectedSongInfo: \"HI\",\n    selectedPlatform: \"Spotify\",\n  };\n\n  createNotification = (type) => {\n    console.log(\"GOT TO CREATE NOTIFICATION\");\n    switch (type) {\n      case \"info\":\n        NotificationManager.info(\"Info message\");\n        break;\n      case \"success\":\n        NotificationManager.success(\"Success message\", \"Title here\");\n        break;\n      case \"warning\":\n        NotificationManager.warning(\n          \"Warning message\",\n          \"Close after 3000ms\",\n          3000\n        );\n        break;\n      case \"error\":\n        NotificationManager.error(\n          \"Make sure you are logged into your Spotify\",\n          \"Error!\",\n          5000,\n          () => {\n            //alert(\"callback\");\n          }\n        );\n        break;\n    }\n    return () => {};\n  };\n\n  spotifySearchTrack = () => {\n    this.setState({\n      selectedPlatform: \"Spotify\",\n    });\n\n    var query = document.getElementById(\"searchQuery\").value;\n    spotifyWebApi.searchTracks(query).then(\n      (response) => {\n        console.log(response);\n        this.setState({\n          trackSearchResults: response.tracks.items,\n          spotifySearch: true,\n        });\n\n        global.spotifyTrackSearchResults = response.tracks.items;\n        global.lastSpotifySearchQuery = query;\n      },\n      (reason) => {\n        console.log(\"GOT TO ERROR\");\n        this.createNotification(\"error\");\n        console.error(reason); // Error!\n      }\n    );\n  };\n\n  showSongOptions = (songInfo) => {\n    console.log(songInfo);\n\n    this.setState({\n      songOptionsSelected: true,\n      selectedSongInfo: songInfo,\n    });\n  };\n\n  playSongNow = (songInfo) => {\n    const songURI = songInfo[\"uri\"];\n\n    playURI(songURI, global.spotifyAccessToken);\n\n    global.isContentPlaying = true;\n\n    // Set song as currently playing\n    global.currentlyPlaying = [\"Spotify\", songInfo];\n\n    this.context.updateSessionQueue(global.sessionQueue);\n  };\n\n  formatArtistString = (artistObj) => {\n    var artistString = \"\";\n    var numArtists = 0;\n\n    for (var key in Object.keys(artistObj)) {\n      var artist = artistObj[key];\n\n      if (numArtists > 0) {\n        artistString = artistString + \", \" + artist.name;\n      } else {\n        artistString = artist.name;\n      }\n      numArtists += 1;\n    }\n\n    return artistString;\n  };\n\n  // Youtube API\n  youtubeSearch = () => {\n    var query = document.getElementById(\"searchQuery\").value;\n    YTSearch({ key: YOUTUBE_API_KEY, term: query }, (videos) => {\n      //do something with videos!\n      console.log(videos);\n\n      this.setState({\n        selectedPlatform: \"Youtube\",\n        youtubeSearchResults: videos,\n      });\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"searchFlex\">\n        <div className=\"searchMiddle\">\n          <div className=\"searchQueryDiv\">\n            <div className=\"searchInputDiv\">\n              <img className=\"searchIcon\" src={SearchIcon} alt=\"\"></img>\n              <input\n                type=\"text\"\n                id=\"searchQuery\"\n                placeholder={\n                  this.state.lastSpotifySearchQuery === \"\"\n                    ? \"Search a song or artist..\"\n                    : this.state.lastSpotifySearchQuery\n                }></input>\n            </div>\n            <div className=\"searchButtonDiv\">\n              <button\n                id=\"spotifySearchBtn\"\n                onClick={this.spotifySearchTrack}></button>\n              <button\n                id=\"youtubeSearchBtn\"\n                onClick={this.youtubeSearch}></button>\n            </div>\n            <p id=\"searchDivHeader\">\n              {this.state.spotifySearch\n                ? \"Spotify Search\"\n                : \"Enter a query and click desired platform to search..\"}\n            </p>\n          </div>\n          <SearchResults\n            trackSearchResults={this.state.trackSearchResults}\n            youtubeSearchResults={this.state.youtubeSearchResults}\n            playSongNow={this.playSongNow}\n            showSongOptions={this.showSongOptions}\n            selectedPlatform={this.state.selectedPlatform}></SearchResults>\n          <NotificationContainer />\n        </div>\n        {/* If Song Options was selected, show selected song info on right side */}\n        {this.state.songOptionsSelected ? (\n          <div className=\"searchRight\">\n            <img\n              className=\"songOptionsAlbumImg\"\n              src={this.state.selectedSongInfo.album.images[0].url}\n              alt=\"\"></img>\n\n            <p className=\"songOptionsTitle\">\n              {this.state.selectedSongInfo.name}\n            </p>\n            <p className=\"songOptionsArtist\">\n              {this.formatArtistString(this.state.selectedSongInfo.artists)}\n            </p>\n            <div id=\"firstSeparatorLine\"></div>\n            <button\n              id=\"addToQueueBtn\"\n              onClick={() =>\n                addSongToQueue(\n                  this.state.selectedPlatform,\n                  this.state.selectedSongInfo\n                )\n              }></button>\n            <div id=\"secondSeparatorLine\"></div>\n            <button\n              id=\"viewOnSpotifyBtn\"\n              onClick={() =>\n                viewOnSpotify(this.state.selectedSongInfo)\n              }></button>\n          </div>\n        ) : (\n          // If nothing selected, show nothing on right side\n          <div className=\"searchRight\"></div>\n        )}\n      </div>\n    );\n  }\n}\nSearchWeb.contextType = SessionContext;\n\nexport default SearchWeb;\n"]},"metadata":{},"sourceType":"module"}